<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Добавление и просмотр товаров</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .details-row {
            display: none;
            background-color: #f8f9fa;
        }
        .clickable:hover {
            background-color: #f1f1f1;
            cursor: pointer;
        }
        img {
            max-height: 150px;
        }
    </style>
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-dark text-white">
            <h4 class="mb-0">Добавление товара</h4>
        </div>
        <div class="card-body">
            <form action="/item/add" method="post" enctype="multipart/form-data" class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Название товара</label>
                    <input type="text" name="name" class="form-control" placeholder="Введите название" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Цена</label>
                    <input type="number" name="value" class="form-control" placeholder="Введите цену" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Тип товара</label>
                    <input type="number" name="type_id" class="form-control" placeholder="ID типа" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Размер</label>
                    <input type="number" name="size_id" class="form-control" placeholder="ID размера" required>
                </div>
                <div class="col-12">
                    <label class="form-label">Фото</label>
                    <input type="file" name="photo" class="form-control" required>
                </div>
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-dark">Добавить товар</button>
                </div>
            </form>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
            <h4 class="mb-0">Список товаров</h4>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-dark">
                    <tr>
                        <th>Название</th>
                        <th>Цена</th>
                        <th>Тип</th>
                        <th>Размер</th>
                        <th>Действия</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${items}" class="clickable" th:onclick="|toggleDetails('details-' + ${item.id})|">
                        <td th:text="${item.name}"></td>
                        <td th:text="${item.value}"></td>
                        <td th:text="${item.type.type}"></td>
                        <td th:text="${item.size.size}"></td>
                        <td>
                            <a th:href="@{'/item/edit/' + ${item.id}}" class="btn btn-sm btn-outline-primary me-2">Редактировать</a>
                            <a th:href="@{'/item/delete/' + ${item.id}}" class="btn btn-sm btn-outline-danger">Удалить</a>
                        </td>
                    </tr>
                    <tr th:id="'details-' + ${item.id}" class="details-row" th:each="item : ${items}">
                        <td colspan="5">
                            <div class="p-3">
                                <strong>Фото:</strong><br/>
                                <img th:src="@{${item.photo}}" alt="Фото товара"><br/><br/>
                                <strong>ID товара:</strong> <span th:text="${item.id}"></span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="text-start mt-4">
        <a href="/" class="btn btn-outline-secondary">← Назад</a>
    </div>
</div>

<script>
    function toggleDetails(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === 'table-row' ? 'none' : 'table-row';
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
